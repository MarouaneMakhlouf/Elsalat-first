<!DOCTYPE html>
<html lang="ar">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ElSalate First</title>
    <!-- axios cdn -->
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <!-- font awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="container">
        <div class="date-time">
            <div id="date"></div>
            <div id="time"></div>
        </div>
        <header>
            <h1 class="title">الصلاة أولاً</h1>
            <nav>
                <select id="select-country" onchange="setCountryAndCity()">
                    <option selected value="Country">الدولة</option>
                    <option value="Saudi Arabia">السعودية</option>
                    <option value="Morocco">المغرب</option>
                    <option value="Egypt">مصر</option>
                    <option value="Turkey">تركيا</option>
                </select>
                <select id="select-city" onchange="updateCity()">
                    <option selected value="City">المدينة</option>
                </select>
                
            </nav>
        </header>
        <main>
            <div class="boxs">
                <div class="box">
                    <h2>الصّبح</h2>
                    <p id="box1"></p>
                </div>
                <div class="box">
                    <h2>الشروق</h2>
                    <p id="box2"></p>
                </div>
                <div class="box">
                    <h2>الظهر</h2>
                    <p id="box3"></p>
                </div>
                <div class="box">
                    <h2>العصر</h2>
                    <p id="box4"></p>
                </div>
                <div class="box">
                    <h2>المغرب</h2>
                    <p id="box5"></p>
                </div>
                <div class="box">
                    <h2>العشاء</h2>
                    <p id="box6"></p>
                </div>
            </div>
            <div class="hadith">
                <p id="hadith"></p>
                <div class="icon">
                    <i id="right" onclick="updateHadith(this.id)" class="fa-solid fa-arrow-right"></i>
                    <i onclick="copyTextFromElement('hadith')" class="fa-solid fa-copy"></i>
                    <i id="left" onclick="updateHadith(this.id)" class="fa-solid fa-arrow-left"></i>
                </div>
            </div>
        </main>
    </div>

    <script src="main.js"></script>
    <script src="copyelement.js"></script>
    <!-- <script>
        let now = new Date();
        let localDateString = now.toLocaleDateString('en-GB'); // Format to DD/MM/YYYY
        let localTimeString = now.toLocaleTimeString();
        console.log(localDateString);
        let timee = localTimeString.split(':');
        let datee = localDateString.split('/');
        console.log(timee);
        const date = document.getElementById("date");
        const time = document.getElementById("time");
        let allTimes = [];
        date.innerHTML = localDateString;

        let clock = () => {
            let hour = parseInt(timee[0]);
            let minute = parseInt(timee[1]);
            let second = parseInt(timee[2].split(' ')[0]);
            let apm = timee[2].split(' ')[1];

            setInterval(() => {
                second++;
                if (second === 60) {
                    second = 0;
                    minute++;
                }
                if (minute === 60) {
                    minute = 0;
                    hour++;
                }
                if (hour === 12 && apm === 'AM') {
                    apm = 'PM';
                } else if (hour === 12 && apm === 'PM') {
                    apm = 'AM';
                }
                if (hour > 12) {
                    hour -= 12;
                }

                let formattedHour = hour < 10 ? `0${hour}` : hour;
                let formattedMinute = minute < 10 ? `0${minute}` : minute;

                time.innerHTML = `${formattedHour}:${formattedMinute} ${apm}`;
            }, 1000);
        };
        clock();

        let setCountryAndCity = () => {
            let countryAndCity = document.getElementById('select-country').value.split(',');
            setCountry(countryAndCity[0], countryAndCity[1]);
        };

        let setCountry = (country, defaultCity) => {
            let citySelect = document.getElementById('select-city');
            citySelect.innerHTML = `<option selected value="${defaultCity}">${defaultCity}</option>`;

            if (country === 'Morocco') {
                citySelect.innerHTML += '<option value="Casablanca">الداربيضاء</option>';
                citySelect.innerHTML += '<option value="Rabat">الرباط</option>';
                citySelect.innerHTML += '<option value="Agadir">أكادير</option>';
            }
            getResponsive(country, defaultCity);
        };

        let updateCity = () => {
            let country = document.getElementById('select-country').value.split(',')[0];
            let city = document.getElementById('select-city').value;
            getResponsive(country, city);
        };

        let getResponsive = (country = 'Saudi Arabia', city = 'Makkah') => {
            axios.get(`http://api.aladhan.com/v1/calendarByCity?city=${city}&country=${country}&method=2&month=${datee[1]}&year=${datee[2]}`)
                .then((response) => {
                    console.log(response.data.data[0].timings);
                    let times = response.data.data[0].timings;

                    allTimes = [
                        times.Fajr.split(' ')[0],
                        times.Sunrise.split(' ')[0],
                        times.Dhuhr.split(' ')[0],
                        times.Asr.split(' ')[0],
                        times.Maghrib.split(' ')[0],
                        times.Isha.split(' ')[0]
                    ];

                    for (let i = 1; i <= 6; i++) {
                        document.getElementById(`box${i}`).innerHTML = allTimes[i - 1];
                    }
                })
                .catch(function (error) {
                    console.error(error);
                });
        };

        // Initial call to load data for the default country and city
        setCountryAndCity();
    </script> -->
</body>

</html>
